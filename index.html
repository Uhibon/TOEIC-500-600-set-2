<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TOEIC (500-600) set-2 â€“ Boo-riculum</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0b78ff; --ok:#22c55e; --bad:#ef4444; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('Booha card.jpg') center/cover fixed no-repeat;
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.88);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:800;letter-spacing:.3px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('Booha card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:56vh;margin:16px auto;padding:22px 18px 28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25); position:relative;
    }
    .brand{
      position:absolute;top:10px;left:12px;display:flex;gap:8px;align-items:center;
      background:rgba(255,255,255,0.85);padding:6px 10px;border-radius:12px;border:1px solid #ddd;
      box-shadow:0 2px 6px rgba(0,0,0,0.08); font-weight:800; letter-spacing:.2px;
    }
    .brand img{height:20px;width:auto}
    .brand span{background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.86);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));} .main{font-size:24px}}
    a{color:#0b78ff;text-decoration:none}
    .hidden{display:none}
    .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .optbtn{border:1px solid #ccc;border-radius:12px;padding:10px 14px;background:rgba(255,255,255,0.95);cursor:pointer}
    .optbtn.ok{background:#dcfce7;border-color:#86efac;color:#166534}
    .optbtn.bad{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
    .small{font-size:15px; line-height:1.45;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> Boo-riculum â€“ TOEIC (500-600) set-2</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: ğŸ‡¯ğŸ‡µ â†’ ğŸ‡ºğŸ‡¸</option>
          <option value="vocab-e2j">Vocab: ğŸ‡ºğŸ‡¸ â†’ ğŸ‡¯ğŸ‡µ</option>
          <option value="sentences">Sentences (practice)</option>
          <option value="qa">Questions (practice)</option>
          <option value="quiz">Quiz (multiple choice)</option>
          <option value="reading">Reading</option>
        </select>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div class="brand"><img src="booha-ghost.png" alt="Booha ghost"><span>Boo-riculum</span></div>
      <div id="label" class="label">Front</div>
      <div id="main" class="main">â€”</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
      <div id="mcArea" class="options hidden"></div>
    </div>

    <div class="footer">
      <div class="row">
        <span class="pill" title="Left / Right keys">Keyboard: â† â†’</span>
        <span class="pill" title="Space to flip">Space = Flip</span>
        <button id="btnPrev" title="â† or swipe right">â—€ï¸ Prev</button>
        <button id="btnFlip" title="Tap / Space">Flip</button>
        <button id="btnNext" title="â†’ or swipe left">Next â–¶ï¸</button>
        <button id="btnShuffle" title="Shuffle deck">Shuffle</button>
      </div>
      <div style="min-width:180px;text-align:right">
        <div id="counter" class="muted">0 / 0</div>
        <div class="progress" aria-hidden="true"><span id="bar"></span></div>
      </div>
    </div>
  </div>

  <script>
    // ---------------- Data (500-600 Set 2) ----------------
    // NOTE: none of these duplicate set-1 items.
    const VOCAB = [
      { en:"acknowledge", ja:"èªã‚ã‚‹" },
      { en:"adjust", ja:"èª¿æ•´ã™ã‚‹" },
      { en:"affordable", ja:"æ‰‹é ƒãªä¾¡æ ¼ã®" },
      { en:"alternative", ja:"ä»£æ›¿ã®" },
      { en:"analyze", ja:"åˆ†æã™ã‚‹" },
      { en:"anticipate", ja:"äºˆæœŸã™ã‚‹" },
      { en:"appeal", ja:"é­…åŠ›ï¼è¨´ãˆã‚‹" },
      { en:"approve", ja:"æ‰¿èªã™ã‚‹" },
      { en:"arrange", ja:"æ‰‹é…ã™ã‚‹" },
      { en:"attach", ja:"æ·»ä»˜ã™ã‚‹" },
      { en:"attempt", ja:"è©¦ã¿ã‚‹" },
      { en:"aware", ja:"æ°—ã¥ã„ã¦ã„ã‚‹" },
      { en:"balance", ja:"å‡è¡¡ï¼æ®‹é«˜" },
      { en:"benefit", ja:"åˆ©ç›Šï¼æ©æµ" },
      { en:"brief", ja:"ç°¡æ½”ãª" },
      { en:"broadcast", ja:"æ”¾é€ã™ã‚‹" },
      { en:"calculate", ja:"è¨ˆç®—ã™ã‚‹" },
      { en:"candidate", ja:"å€™è£œè€…" },
      { en:"deadline", ja:"ç· ã‚åˆ‡ã‚Š" },
      { en:"deliver", ja:"ç´å“ã™ã‚‹ï¼é…é”ã™ã‚‹" }
    ];

    const SENTENCES = [
      { en:"Please acknowledge receipt of the package.", ja:"è·ç‰©ã®å—é ˜ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚" },
      { en:"We should adjust the budget for next quarter.", ja:"æ¥æœŸã®äºˆç®—ã‚’èª¿æ•´ã™ã¹ãã§ã™ã€‚" },
      { en:"Our goal is to provide affordable services.", ja:"æ‰‹é ƒãªä¾¡æ ¼ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒç›®æ¨™ã§ã™ã€‚" },
      { en:"If the vendor is unavailable, choose an alternative.", ja:"æ¥­è€…ãŒä¸åœ¨ãªã‚‰ä»£æ›¿æ¡ˆã‚’é¸ã³ã¾ã—ã‚‡ã†ã€‚" },
      { en:"The team will analyze customer feedback.", ja:"ãƒãƒ¼ãƒ ã¯é¡§å®¢ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åˆ†æã—ã¾ã™ã€‚" },
      { en:"We anticipate strong demand this summer.", ja:"ä»Šå¤ã¯å¼·ã„éœ€è¦ã‚’è¦‹è¾¼ã‚“ã§ã„ã¾ã™ã€‚" },
      { en:"The design appeals to first-time buyers.", ja:"ãã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯åˆã‚ã¦ã®è³¼å…¥è€…ã«é­…åŠ›çš„ã§ã™ã€‚" },
      { en:"Management approved the hiring plan.", ja:"çµŒå–¶é™£ã¯æ¡ç”¨è¨ˆç”»ã‚’æ‰¿èªã—ã¾ã—ãŸã€‚" },
      { en:"Could you arrange transportation to the venue?", ja:"ä¼šå ´ã¾ã§ã®äº¤é€šæ‰‹æ®µã‚’æ‰‹é…ã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ" },
      { en:"Please attach the invoice to your email.", ja:"ãƒ¡ãƒ¼ãƒ«ã«è«‹æ±‚æ›¸ã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚" },
      { en:"She attempted to resolve the issue quickly.", ja:"å½¼å¥³ã¯è¿…é€Ÿã«å•é¡Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚" },
      { en:"Be aware of the updated safety rules.", ja:"æ›´æ–°ã•ã‚ŒãŸå®‰å…¨è¦å‰‡ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚" },
      { en:"Check your account balance before purchase.", ja:"è³¼å…¥å‰ã«å£åº§æ®‹é«˜ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚" },
      { en:"This policy brings long-term benefits.", ja:"ã“ã®æ–¹é‡ã¯é•·æœŸçš„ãªåˆ©ç›Šã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚" },
      { en:"Keep the presentation brief and informative.", ja:"ãƒ—ãƒ¬ã‚¼ãƒ³ã¯ç°¡æ½”ã§æœ‰ç›Šã«ã—ã¦ãã ã•ã„ã€‚" },
      { en:"The ceremony will be broadcast nationwide.", ja:"å¼å…¸ã¯å…¨å›½æ”¾é€ã•ã‚Œã¾ã™ã€‚" },
      { en:"We calculated the shipping cost precisely.", ja:"é…é€è²»ã‚’æ­£ç¢ºã«è¨ˆç®—ã—ã¾ã—ãŸã€‚" },
      { en:"Three candidates were shortlisted.", ja:"3åã®å€™è£œè€…ãŒæœ€çµ‚é¸è€ƒã«æ®‹ã‚Šã¾ã—ãŸã€‚" },
      { en:"The deadline for submissions is Friday.", ja:"æå‡ºã®ç· ã‚åˆ‡ã‚Šã¯é‡‘æ›œæ—¥ã§ã™ã€‚" },
      { en:"They deliver fresh produce every morning.", ja:"å½¼ã‚‰ã¯æ¯æœæ–°é®®ãªè¾²ç”£ç‰©ã‚’é…é”ã—ã¾ã™ã€‚" }
    ];

    const QA = [
      { q_en:"What does it mean to acknowledge an email?", a_en:"To confirm that you received and read it.", q_ja:"ãƒ¡ãƒ¼ãƒ«ã‚’acknowledgeã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"å—ã‘å–ã‚Šãƒ»ç¢ºèªã—ãŸã“ã¨ã‚’çŸ¥ã‚‰ã›ã‚‹ã“ã¨ã€‚" },
      { q_en:"When should you adjust your schedule?", a_en:"When new priorities or delays appear.", q_ja:"ã„ã¤ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª¿æ•´ã—ã¾ã™ã‹ï¼Ÿ", a_ja:"æ–°ãŸãªå„ªå…ˆäº‹é …ã‚„é…å»¶ãŒç™ºç”Ÿã—ãŸã¨ãã€‚" },
      { q_en:"Why choose an affordable option?", a_en:"It saves money while meeting requirements.", q_ja:"ãªãœæ‰‹é ƒãªé¸æŠè‚¢ã‚’é¸ã¶ï¼Ÿ", a_ja:"è¦ä»¶ã‚’æº€ãŸã—ã¤ã¤è²»ç”¨ã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹ã‹ã‚‰ã€‚" },
      { q_en:"What is an alternative solution?", a_en:"A different method that achieves the goal.", q_ja:"ä»£æ›¿è§£ã¨ã¯ä½•ï¼Ÿ", a_ja:"ç›®çš„ã‚’é”æˆã™ã‚‹åˆ¥ã®æ–¹æ³•ã€‚" },
      { q_en:"How do you analyze a problem?", a_en:"Break it into parts and study the data.", q_ja:"å•é¡Œã‚’ã©ã†åˆ†æã™ã‚‹ï¼Ÿ", a_ja:"è¦ç´ ã«åˆ†ã‘ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨ã™ã‚‹ã€‚" },
      { q_en:"What does it mean to anticipate risks?", a_en:"To foresee them and prepare responses.", q_ja:"ãƒªã‚¹ã‚¯ã‚’äºˆæœŸã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"å‰ã‚‚ã£ã¦æƒ³å®šã—å¯¾ç­–ã‚’æº–å‚™ã™ã‚‹ã“ã¨ã€‚" },
      { q_en:"What does 'appeal to users' mean?", a_en:"To be attractive or interesting to them.", q_ja:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¢ãƒ”ãƒ¼ãƒ«ã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"é­…åŠ›çš„ãƒ»èˆˆå‘³ã‚’å¼•ãã“ã¨ã€‚" },
      { q_en:"Who approves a large purchase?", a_en:"A manager or the finance department.", q_ja:"å¤§å£è³¼å…¥ã‚’æ‰¿èªã™ã‚‹ã®ã¯èª°ï¼Ÿ", a_ja:"ç®¡ç†è·ã¾ãŸã¯çµŒç†éƒ¨é–€ã€‚" },
      { q_en:"What does it mean to arrange a meeting?", a_en:"To set time, place, and participants.", q_ja:"ä¼šè­°ã‚’æ‰‹é…ã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"æ™‚é–“ãƒ»å ´æ‰€ãƒ»å‚åŠ è€…ã‚’æ±ºã‚ã‚‹ã“ã¨ã€‚" },
      { q_en:"Why attach a file to an email?", a_en:"To include documents or images.", q_ja:"ãªãœãƒ¡ãƒ¼ãƒ«ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ï¼Ÿ", a_ja:"æ–‡æ›¸ã‚„ç”»åƒã‚’åŒå°ã™ã‚‹ãŸã‚ã€‚" },
      { q_en:"What is an attempt?", a_en:"An effort to do something difficult.", q_ja:"attemptã¨ã¯ä½•ï¼Ÿ", a_ja:"é›£ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹è©¦ã¿ã€‚" },
      { q_en:"What does 'be aware of changes' mean?", a_en:"Know the updates and act accordingly.", q_ja:"å¤‰æ›´ã«æ°—ã¥ãã¨ã¯ï¼Ÿ", a_ja:"æ›´æ–°ç‚¹ã‚’ç†è§£ã—ãã‚Œã«å¿œã˜ã¦è¡Œå‹•ã™ã‚‹ã“ã¨ã€‚" },
      { q_en:"What is an account balance?", a_en:"The money available in an account.", q_ja:"å£åº§æ®‹é«˜ã¨ã¯ï¼Ÿ", a_ja:"å£åº§ã§åˆ©ç”¨å¯èƒ½ãªãŠé‡‘ã€‚" },
      { q_en:"What is an employee benefit?", a_en:"An extra perk like insurance or leave.", q_ja:"å¾“æ¥­å“¡ã®ç¦åˆ©åšç”Ÿã¨ã¯ï¼Ÿ", a_ja:"ä¿é™ºã‚„ä¼‘æš‡ãªã©ã®ç‰¹å…¸ã€‚" },
      { q_en:"Why keep instructions brief?", a_en:"To make them quick and easy to follow.", q_ja:"æŒ‡ç¤ºã‚’ç°¡æ½”ã«ã™ã‚‹ç†ç”±ï¼Ÿ", a_ja:"ç´ æ—©ãç†è§£ã—ã‚„ã™ãã™ã‚‹ãŸã‚ã€‚" },
      { q_en:"What does it mean to broadcast news?", a_en:"To air it on TV, radio, or online.", q_ja:"ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æ”¾é€ã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"ãƒ†ãƒ¬ãƒ“ãƒ»ãƒ©ã‚¸ã‚ªãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç™ºä¿¡ã™ã‚‹ã“ã¨ã€‚" },
      { q_en:"How do you calculate total cost?", a_en:"Add all fees, taxes, and discounts.", q_ja:"ç·è²»ç”¨ã‚’ã©ã†è¨ˆç®—ï¼Ÿ", a_ja:"æ‰‹æ•°æ–™ãƒ»ç¨é‡‘ãƒ»å‰²å¼•ã‚’åˆç®—ã™ã‚‹ã€‚" },
      { q_en:"Who is a candidate?", a_en:"A person applying for a position.", q_ja:"candidateã¨ã¯èª°ï¼Ÿ", a_ja:"è·ã«å¿œå‹Ÿã—ã¦ã„ã‚‹äººã€‚" },
      { q_en:"What is a deadline?", a_en:"The final date and time for submission.", q_ja:"ç· ã‚åˆ‡ã‚Šã¨ã¯ï¼Ÿ", a_ja:"æå‡ºã®æœ€çµ‚æ—¥æ™‚ã€‚" },
      { q_en:"What does it mean to deliver goods?", a_en:"To bring and hand them to the buyer.", q_ja:"å•†å“ã‚’ç´å“ã™ã‚‹ã¨ã¯ï¼Ÿ", a_ja:"è³¼å…¥è€…ã«å“ç‰©ã‚’å±Šã‘æ¸¡ã™ã“ã¨ã€‚" }
    ];

    // Quiz: 20 questions, 4 options each, only proceed after correct choice
    const QUIZ = [
      { q:"'Acknowledge' most nearly means:", options:["ignore","confirm","argue","delay"], answer:1, ja:"ã€acknowledgeã€ã®æ„å‘³ã«æœ€ã‚‚è¿‘ã„ã®ã¯ï¼Ÿ" },
      { q:"To 'adjust' a plan is to:", options:["finalize it","cancel it","modify it","copy it"], answer:2, ja:"è¨ˆç”»ã‚’ã€adjustã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"An 'affordable' price is:", options:["excessive","reasonable","hidden","variable"], answer:1, ja:"ã€affordableã€ãªä¾¡æ ¼ã¨ã¯ï¼Ÿ" },
      { q:"An 'alternative' is a:", options:["restriction","duplicate","substitute","mistake"], answer:2, ja:"ã€alternativeã€ã¨ã¯ï¼Ÿ" },
      { q:"To 'analyze' data is to:", options:["guess","examine","delete","announce"], answer:1, ja:"ãƒ‡ãƒ¼ã‚¿ã‚’ã€analyzeã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'anticipate' problems is to:", options:["ignore them","expect them","create them","report them"], answer:1, ja:"å•é¡Œã‚’ã€anticipateã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'appeal' to customers is to:", options:["confuse them","attract them","replace them","charge them"], answer:1, ja:"é¡§å®¢ã«ã€appealã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'approve' a request is to:", options:["reject it","sign it","postpone it","overlook it"], answer:1, ja:"ä¾é ¼ã‚’ã€approveã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'arrange' a visit is to:", options:["complain","organize","delay","remove"], answer:1, ja:"è¨ªå•ã‚’ã€arrangeã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'attach' a file is to:", options:["compress it","rename it","include it","translate it"], answer:2, ja:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€attachã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"An 'attempt' is a:", options:["failure","plan","trial","survey"], answer:2, ja:"ã€attemptã€ã¨ã¯ï¼Ÿ" },
      { q:"To be 'aware' of rules is to:", options:["violate them","know them","write them","sell them"], answer:1, ja:"è¦å‰‡ã‚’ã€awareã€ã§ã‚ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"Your account 'balance' is your:", options:["income","loan","savings","available funds"], answer:3, ja:"å£åº§ã€balanceã€ã¯ï¼Ÿ" },
      { q:"A 'benefit' is a:", options:["risk","cost","loss","perk"], answer:3, ja:"ã€benefitã€ã¨ã¯ï¼Ÿ" },
      { q:"A 'brief' report is:", options:["long","complicated","short","outdated"], answer:2, ja:"ã€briefã€ãªå ±å‘Šã¨ã¯ï¼Ÿ" },
      { q:"To 'broadcast' an event is to:", options:["cancel it","air it","delay it","predict it"], answer:1, ja:"ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã€broadcastã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"To 'calculate' the fee is to:", options:["estimate roughly","pay it","compute it","waive it"], answer:2, ja:"æ–™é‡‘ã‚’ã€calculateã€ã™ã‚‹ã¨ã¯ï¼Ÿ" },
      { q:"A 'candidate' is a person who:", options:["is leaving","is applying","is buying","is voting"], answer:1, ja:"ã€candidateã€ã¨ã¯ï¼Ÿ" },
      { q:"A 'deadline' is:", options:["a starting point","a requirement","a final due time","a discount"], answer:2, ja:"ã€deadlineã€ã¨ã¯ï¼Ÿ" },
      { q:"To 'deliver' goods is to:", options:["store them","send them to the buyer","design them","inspect them"], answer:1, ja:"å•†å“ã‚’ã€deliverã€ã™ã‚‹ã¨ã¯ï¼Ÿ" }
    ];

    // Extra reading practice (fresh lines, distinct from set-1)
    const READING = [
      { en:"Please attach your resume to the online form.", ja:"ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã«å±¥æ­´æ›¸ã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚" },
      { en:"The conference will be broadcast from 9 a.m.", ja:"ä¼šè­°ã¯åˆå‰9æ™‚ã‹ã‚‰æ”¾é€ã•ã‚Œã¾ã™ã€‚" },
      { en:"We anticipate higher sales during the holiday.", ja:"ä¼‘æš‡æœŸé–“ä¸­ã«å£²ä¸Šã®å¢—åŠ ã‚’è¦‹è¾¼ã‚“ã§ã„ã¾ã™ã€‚" },
      { en:"Keep all instructions brief and specific.", ja:"ã™ã¹ã¦ã®æŒ‡ç¤ºã‚’ç°¡æ½”ã‹ã¤å…·ä½“çš„ã«ã—ã¦ãã ã•ã„ã€‚" },
      { en:"Three candidates advanced to the final interview.", ja:"3åã®å€™è£œè€…ãŒæœ€çµ‚é¢æ¥ã«é€²ã¿ã¾ã—ãŸã€‚" },
      { en:"Please calculate the total including taxes.", ja:"ç¨é‡‘ã‚’å«ã‚ãŸåˆè¨ˆã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚" },
      { en:"The new layout appeals to international visitors.", ja:"æ–°ã—ã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯æµ·å¤–ã®æ¥å ´è€…ã«é­…åŠ›çš„ã§ã™ã€‚" },
      { en:"We adjusted the deadline after the outage.", ja:"éšœå®³å¾Œã«ç· ã‚åˆ‡ã‚Šã‚’èª¿æ•´ã—ã¾ã—ãŸã€‚" },
      { en:"Kindly acknowledge this message upon receipt.", ja:"å—ä¿¡ã—ãŸã‚‰ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚" },
      { en:"Use an alternative route to avoid congestion.", ja:"æ¸‹æ»ã‚’é¿ã‘ã‚‹ãŸã‚åˆ¥ãƒ«ãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚" },
      { en:"The supplier will deliver samples on Monday.", ja:"ä»•å…¥å…ˆã¯æœˆæ›œæ—¥ã«ã‚µãƒ³ãƒ—ãƒ«ã‚’ç´å“ã—ã¾ã™ã€‚" },
      { en:"Be aware of phishing emails asking for passwords.", ja:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ±‚ã‚ã‚‹ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ãƒ¡ãƒ¼ãƒ«ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚" },
      { en:"The benefit of automation is greater accuracy.", ja:"è‡ªå‹•åŒ–ã®åˆ©ç‚¹ã¯ã‚ˆã‚Šé«˜ã„æ­£ç¢ºæ€§ã§ã™ã€‚" },
      { en:"Finance approved the reimbursement claim.", ja:"çµŒç†ãŒæ‰•ã„æˆ»ã—ç”³è«‹ã‚’æ‰¿èªã—ã¾ã—ãŸã€‚" },
      { en:"They arranged a shuttle from the station.", ja:"é§…ã‹ã‚‰ã®ã‚·ãƒ£ãƒˆãƒ«ã‚’æ‰‹é…ã—ã¾ã—ãŸã€‚" },
      { en:"Our estimate is affordable for small teams.", ja:"è¦‹ç©ã‚‚ã‚Šã¯å°è¦æ¨¡ãƒãƒ¼ãƒ ã«æ‰‹é ƒã§ã™ã€‚" },
      { en:"Please analyze the survey before the meeting.", ja:"ä¼šè­°å‰ã«ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚" },
      { en:"We will deliver the final draft by Friday.", ja:"é‡‘æ›œæ—¥ã¾ã§ã«æœ€çµ‚ç¨¿ã‚’æå‡ºã—ã¾ã™ã€‚" },
      { en:"Broadcast media covered the product launch.", ja:"ãƒ¡ãƒ‡ã‚£ã‚¢ãŒè£½å“ç™ºè¡¨ã‚’å–ã‚Šä¸Šã’ã¾ã—ãŸã€‚" },
      { en:"Your current balance appears on the last page.", ja:"ç¾åœ¨ã®æ®‹é«˜ã¯æœ€çµ‚ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚" }
    ];

    // -------------- State & Elements --------------
    let deck = [];
    let index = 0;
    let showingFront = true;

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      mcArea: document.getElementById('mcArea'),
    };

    // -------------- Helpers --------------
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]} return arr; }

    // -------------- Build Decks --------------
    function buildDeck(){
      const mode = els.mode.value;
      if(mode==='vocab-j2e' || mode==='vocab-e2j'){
        deck = VOCAB.map(x=>({
          type:'vocab',
          front: mode==='vocab-j2e' ? x.ja : x.en,
          back:  mode==='vocab-j2e' ? x.en : x.ja,
          sideLabelFront: mode==='vocab-j2e' ? 'Japanese â†’ English' : 'English â†’ Japanese',
          sideLabelBack:  mode==='vocab-j2e' ? 'English' : 'Japanese',
        }));
      } else if(mode==='sentences'){
        deck = SENTENCES.map(s=>({
          type:'sentence',
          front: s.ja,
          back: s.en + '\n' + s.ja,
          sideLabelFront: 'Japanese sentence',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='qa'){
        deck = QA.map(q=>({
          type:'qa',
          front: q.q_ja || q.q_en,
          back: (q.a_en || '') + (q.a_ja ? '\n' + q.a_ja : ''),
          sideLabelFront: (q.q_ja ? 'Question (JA)' : 'Question (EN)'),
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='quiz'){
        deck = QUIZ.map(q=>({
          type:'quiz4',
          front: q.q,
          back: (q.ja ? q.ja + '\n' : '') + 'Answer: ' + q.options[q.answer],
          options: q.options,
          answer: q.answer,
          sideLabelFront: 'Choose the best answer',
          sideLabelBack: 'Explanation',
        }));
      } else if(mode==='reading'){
        deck = READING.map(r=>({
          type:'reading',
          front: r.en,
          back: r.en + '\n' + r.ja,
          sideLabelFront: 'Reading (EN)',
          sideLabelBack: 'Reading (EN + JA)',
        }));
      }
      index = 0; showingFront = true; render();
    }

    // -------------- Render --------------
    function render(){
      if(deck.length===0){ els.main.textContent='â€”'; els.sub.textContent='No cards'; els.counter.textContent='0 / 0'; return; }
      const item = deck[index];
      const mode = els.mode.value;
      els.label.textContent = showingFront ? item.sideLabelFront : item.sideLabelBack;

      const content = showingFront ? item.front : item.back;
      if((!showingFront) && (item.type==='qa' || item.type==='sentence' || item.type==='reading') && content.includes('\n')){
        const [line1, line2] = content.split('\n');
        els.main.innerHTML = `<div style="font-size:22px;font-weight:700" class="${item.type==='reading'?'small':''}">${line1}</div>
                              <div class="sub ${item.type==='reading'?'small':''}" style="margin-top:8px">${line2}</div>`;
      } else {
        els.main.innerHTML = `<div class="${item.type==='reading'?'small':''}">${content}</div>`;
      }

      // QUIZ behavior: wrong stays red and disabled; only proceed on correct
      if(mode==='quiz' && item.type==='quiz4' && showingFront){
        els.sub.textContent = 'Choose the correct answer.';
        els.mcArea.classList.remove('hidden');
        els.mcArea.innerHTML = '';
        item.options.forEach((opt, i)=>{
          const btn = document.createElement('button');
          btn.className = 'optbtn';
          btn.textContent = opt;
          btn.addEventListener('click', (e)=>{
            e.preventDefault(); e.stopPropagation();
            if(i !== item.answer){
              btn.classList.add('bad');
              btn.disabled = true;
              return;
            }
            btn.classList.add('ok');
            [...els.mcArea.querySelectorAll('button')].forEach(b=>b.disabled=true);
            setTimeout(()=>{ showingFront = false; render(); }, 250);
          }, { passive:false });
          els.mcArea.appendChild(btn);
        });
      } else {
        els.mcArea.classList.add('hidden');
        els.mcArea.innerHTML = '';
        if(item.type==='quiz4' && showingFront){ els.sub.textContent = 'Choose the correct answer.'; }
        else { els.sub.textContent = 'Tap / Space to flip Â· Swipe / â† â†’ to navigate'; }
      }

      els.counter.textContent = `${index+1} / ${deck.length}`;
      els.bar.style.width = `${((index+1)/deck.length)*100}%`;
      setHash();
    }

    // -------------- Navigation --------------
    function prev(){ index = (index-1+deck.length)%deck.length; showingFront=true; render(); }
    function next(){ index = (index+1)%deck.length; showingFront=true; render(); }
    function flip(){ showingFront = !showingFront; render(); }
    function shuffleDeck(){ deck = shuffle(deck); index=0; showingFront=true; render(); }

    // -------------- URL Hash --------------
    function setHash(){ location.hash = `#${els.mode.value}:${index}`; }
    function readHash(){
      const h = location.hash.replace('#','');
      if(!h) return;
      const [m, i] = h.split(':');
      if(m && [...els.mode.options].some(o=>o.value===m)) els.mode.value = m;
      if(i && !Number.isNaN(+i)) index = Math.max(0, Math.min(deck.length-1, +i));
    }

    // -------------- Events --------------
    els.mode.addEventListener('change', ()=>{ buildDeck(); setHash(); });
    document.getElementById('btnPrev').addEventListener('click', prev);
    document.getElementById('btnNext').addEventListener('click', next);
    document.getElementById('btnFlip').addEventListener('click', flip);
    document.getElementById('btnShuffle').addEventListener('click', shuffleDeck);

    window.addEventListener('keydown', (e)=>{
      if(e.code==='ArrowLeft'){ e.preventDefault(); prev(); }
      else if(e.code==='ArrowRight'){ e.preventDefault(); next(); }
      else if(e.code==='Space'){ e.preventDefault(); if(!(els.mode.value==='quiz' && showingFront)) flip(); }
      else if(['1','2','3','4'].includes(e.key) && els.mode.value==='quiz' && showingFront){
        const i = parseInt(e.key,10)-1; const b=els.mcArea.querySelectorAll('button')[i]; if(b) b.click();
      }
    });

    document.getElementById('card').addEventListener('click', (e)=>{
      if(els.mode.value==='quiz' && showingFront) return;
      flip();
    }, { passive:true });

    let touchStartX=null, touchStartY=null;
    document.getElementById('card').addEventListener('touchstart', (e)=>{
      const t=e.changedTouches[0]; touchStartX=t.clientX; touchStartY=t.clientY;
    }, {passive:true});
    document.getElementById('card').addEventListener('touchend', (e)=>{
      const t=e.changedTouches[0]; if(touchStartX===null) return;
      const dx=t.clientX - touchStartX; const dy=t.clientY - touchStartY;
      if(Math.abs(dx)>50 && Math.abs(dx)>Math.abs(dy)){
        if(dx>0) prev(); else next();
      } else if(Math.abs(dy)<10 && Math.abs(dx)<10){
        if(!(els.mode.value==='quiz' && showingFront)) flip();
      }
      touchStartX=touchStartY=null;
    }, {passive:true});

    // Init
    buildDeck();
    readHash();
    render();
  </script>
</body>
</html>
